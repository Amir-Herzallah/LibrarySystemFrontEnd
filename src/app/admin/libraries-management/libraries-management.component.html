<router-outlet></router-outlet>
<app-admin-navbar></app-admin-navbar>
<div class="container-fluid page-body-wrapper">
    <app-admin-sidebar></app-admin-sidebar>
    <div class="main-panel">
        <div class="content-wrapper p-4" style="margin-top: 5rem;">
            <div class="row">
                <div class="col-12 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">All libraries</h4>
                            <button mat-button (click)="OpenCreateDialog()">Create Library</button>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> Library Name </th>
                                            <th> Location Latitude </th>
                                            <th> Location Longitude </th>
                                            <th> Phone Number </th>
                                            <th> Email</th>
                                            <th> Description </th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let obj of LibraryService.libraries">
                                            <td>
                                                <img src="../../../assets/LibraryImages/{{obj.image_Path1}}" class="me-2"
                                                    alt="image"> 
                                                    {{obj.name}}
                                            </td>
                                            <td> {{obj.location_Latitude}}</td>
                                            <td> {{obj.location_Longitude}} </td>
                                            <td> {{obj.phone_Number}} </td>
                                            <td> {{obj.email}} </td>
                                            <td> {{obj.description}} </td>
                                            <td>
                                                <button mat-button (click)="OpenUpdateDialog(obj)">Update</button>
                                                <button mat-button (click)="DeleteLibrary(obj.library_Id)">Delete</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <app-admin-footer></app-admin-footer>
    </div>
    <!-- main-panel ends -->
</div>
<!-- page-body-wrapper ends -->
<!-- content-wrapper ends -->

<ng-template #callDeleteDailog>
    <h1 mat-dialog-title>Delete Library</h1>
    <div mat-dialog-content>Are you sure you want to delete this book?</div>
    <div mat-dialog-actions>
        <button mat-button mat-dialog-close="yes" class="btn btn-primary m-1">Yes</button>
        <button mat-button mat-dialog-close="no" class="btn btn-danger m-1">No</button>
    </div>
</ng-template>

<ng-template #callCreateDailog>
    <h2 mat-dialog-title>Create Library</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="createLibrary">
            <mat-form-field class="example-full-width">
                <mat-label>Name</mat-label>
                <input type="text" matInput formControlName="name">
                <mat-error *ngIf="createLibrary.controls['name'].hasError('required')">
                    Library name is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Latitude</mat-label>
                <input type="text" matInput formControlName="location_Latitude">
                <mat-error *ngIf="createLibrary.controls['location_Latitude'].hasError('required')">
                    Library name is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Longitude</mat-label>
                <input type="text" matInput formControlName="location_Longitude">
                <mat-error *ngIf="createLibrary.controls['location_Longitude'].hasError('required')">
                    Description is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Phone Number</mat-label>
                <input type="text" matInput formControlName="phone_Number">
                <mat-error *ngIf="createLibrary.controls['phone_Number'].hasError('required')">
                    Book Image Path is <strong>required</strong>
                </mat-error>
            </mat-form-field>
  <!--           <mat-form-field class="example-full-width">
                <mat-label>Image Path 1</mat-label>
                <input type="text" matInput formControlName="image_Path1">
                <mat-error *ngIf="createLibrary.controls['image_Path1'].hasError('required')">
                    Book Image Path 1 is <strong>required</strong>
                </mat-error>
            </mat-form-field> -->
      <!--       <mat-form-field class="example-full-width">
                <mat-label>Image Path 2</mat-label>
                <input type="text" matInput formControlName="image_Path2">
                <mat-error *ngIf="createLibrary.controls['image_Path2'].hasError('required')">
                    Book Image Path 2 is <strong>required</strong>
                </mat-error>
            </mat-form-field> -->
           
            <mat-form-field class="example-full-width">
                <mat-label>Description</mat-label>
                <input type="text" matInput formControlName="description">
                <mat-error *ngIf="createLibrary.controls['description'].hasError('required')">
                    Description is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input type="text" matInput formControlName="email">
                <mat-error *ngIf="createLibrary.controls['email'].hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <div>
                <input type="file" #file formControlName="image_Path1" (change)="uploadImage(file.files)" />
            </div>
<!--             <div>
                <input type="file" #file formControlName="image_Path2" (change)="uploadImage(file.files)" />
            </div> -->
        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="CreateLibrary()">Create</button>
    </mat-dialog-actions>

</ng-template>


<ng-template #callUpdateDailog>
    <h2 mat-dialog-title>Update Library</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="updateLibrary">
            <mat-form-field class="example-full-width">
                <mat-label>Name</mat-label>
                <input type="text" matInput formControlName="name" [(ngModel)]="pData.name">
                <mat-error *ngIf="updateLibrary.controls['name'].hasError('required')">
                    Book title is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Latitude</mat-label>
                <input type="text" matInput formControlName="location_Latitude" [(ngModel)]="pData.location_Latitude">
                <mat-error *ngIf="updateLibrary.controls['location_Latitude'].hasError('required')">
                    Location Latitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Longitude</mat-label>
                <input type="text" matInput formControlName="location_Longitude" [(ngModel)]="pData.location_Longitude">
                <mat-error *ngIf="updateLibrary.controls['location_Longitude'].hasError('required')">
                    Location Longitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>


            <mat-form-field class="example-full-width">
                <mat-label>Phone Number</mat-label>
                <input type="text" matInput formControlName="phone_Number" [(ngModel)]="pData.phone_Number">
                <mat-error *ngIf="updateLibrary.controls['phone_Number'].hasError('required')">
                    Phone Number is <strong>required</strong>
                </mat-error>
            </mat-form-field>

  <!--           <mat-form-field class="example-full-width">
                <mat-label>Image Path 1</mat-label>
                <input type="text" matInput formControlName="image_Path1" [(ngModel)]="pData.image_Path1">
                <mat-error *ngIf="updateLibrary.controls['image_Path1'].hasError('required')">
                    Image Path 1 is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Image Path 2</mat-label>
                <input type="date" matInput formControlName="image_Path2" [(ngModel)]="pData.image_Path2">
                <mat-error *ngIf="updateLibrary.controls['image_Path2'].hasError('required')">
                    Image Path 2 is <strong>required</strong>
                </mat-error>
            </mat-form-field> -->

            <mat-form-field class="example-full-width">
                <mat-label>Description</mat-label>
                <input type="text" matInput formControlName="description" [(ngModel)]="pData.description">
                <mat-error *ngIf="updateLibrary.controls['description'].hasError('required')">
                    Description is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            
            
            <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input type="text" matInput formControlName="email" [(ngModel)]="pData.email">
                <mat-error *ngIf="updateLibrary.controls['email'].hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <div>
                <input type="file" #file formControlName="image_Path1" (change)="uploadImage(file.files)" />
            </div>
   <!--          <div>
                <input type="file" #file formControlName="image_Path2" (change)="uploadImage(file.files)" />
            </div> -->

        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="UpdateLibrary()">Update</button>
    </mat-dialog-actions>

</ng-template>
