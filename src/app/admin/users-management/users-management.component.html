<router-outlet></router-outlet>
<app-admin-navbar></app-admin-navbar>
<div class="container-fluid page-body-wrapper">
    <app-admin-sidebar></app-admin-sidebar>
    <div class="main-panel">
        <div class="content-wrapper p-4" style="margin-top: 5rem;">
            <div class="row">
                <div class="col-12 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">All Users</h4>
                            <button mat-button (click)="OpenCreateDialog()">Create Users</button>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> First Name </th>
                                            <th> Last Name </th>
                                            <th> Email </th>
                                            <th> location_Latitude </th>
                                            <th> location_Longitude </th>
                                            <th> Phone Number </th>
                                            <th> Profile Img Path </th>
                                            <th> Registration Date </th>
                                            <th> Activated </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let obj of user.users">
                                            <td>
                                                <!-- <img src="../../../assets/images/{{obj.book_Img_Path}}" class="me-2"
                                                    alt="image">  -->
                                                    {{obj.first_Name}}
                                            </td>
                                            <td> {{obj.last_Name}}</td>
                                            <td> {{obj.email}} </td>
                                            <td> {{obj.location_Latitude}} </td>
                                            <td> {{obj.location_Longitude}} </td>
                                            <td> {{obj.phone_Number}} </td>
                                            <td> {{obj.profile_Img_Path}} </td>
                                            <td> {{obj.registration_Date}} </td>
                                            <td> {{obj.is_Activated}} </td>
                                            <td>
                                                <button mat-button (click)="OpenUpdateDialog(obj)">Update</button>
                                                <button mat-button (click)="DeleteUser(obj.user_Id)">Delete</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <app-admin-footer></app-admin-footer>
    </div>
    <!-- main-panel ends -->
</div>
<!-- page-body-wrapper ends -->
<!-- content-wrapper ends -->

<ng-template #callDeleteDailog>
    <h1 mat-dialog-title>Delete User</h1>
    <div mat-dialog-content>Are you sure you want to delete this user?</div>
    <div mat-dialog-actions>
        <button mat-button mat-dialog-close="yes" class="btn btn-primary m-1">Yes</button>
        <button mat-button mat-dialog-close="no" class="btn btn-danger m-1">No</button>
    </div>
</ng-template>

<ng-template #callCreateDailog>
    <h2 mat-dialog-title>Create User</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="createUser">
            <mat-form-field class="example-full-width">
                <mat-label>First Name</mat-label>
                <input type="text" matInput formControlName="first_Name">
                <mat-error *ngIf="createUser.controls['first_Name'].hasError('required')">
                    First Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Last Name</mat-label>
                <input type="text" matInput formControlName="last_Name">
                <mat-error *ngIf="createUser.controls['last_Name'].hasError('required')">
                    Last Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input type="text" matInput formControlName="email">
                <mat-error *ngIf="createUser.controls['email'].hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Location Latitude</mat-label>
                <input type="text" matInput formControlName="location_Latitude">
                <mat-error *ngIf="createUser.controls['location_Latitude'].hasError('required')">
                    Location Latitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Longitude</mat-label>
                <input type="text" matInput formControlName="location_Longitude">
                <mat-error *ngIf="createUser.controls['location_Longitude'].hasError('required')">
                    Location Longitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Phone Number</mat-label>
                <input type="text" matInput formControlName="phone_Number">
                <mat-error *ngIf="createUser.controls['phone_Number'].hasError('required')">
                    Phone Number <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Profile Img Path</mat-label>
                <input type="text" matInput formControlName="profile_Img_Path">
                <mat-error *ngIf="createUser.controls['profile_Img_Path'].hasError('required')">
                    Profile Img Path is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Registration Date</mat-label>
                <input type="date" matInput formControlName="registration_Date">
                <mat-error *ngIf="createUser.controls['registration_Date'].hasError('required')">
                    Registration Date is <strong>required</strong>
                </mat-error>
            </mat-form-field>
           
            <mat-form-field class="example-full-width">
                <mat-label>Is Activated</mat-label>
                <input type="text" matInput formControlName="is_Activated">
                <mat-error *ngIf="createUser.controls['is_Activated'].hasError('required')">
                    Is Activated is <strong>required</strong>
                </mat-error>
            </mat-form-field>

        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="CreateUser()">Create</button>
    </mat-dialog-actions>

</ng-template>


<ng-template #callUpdateDailog>
    <h2 mat-dialog-title>Update Library</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="updateUser">
            <mat-form-field class="example-full-width">
                <mat-label>First Name</mat-label>
                <input type="text" matInput formControlName="first_Name" [(ngModel)]="pData.first_Name">
                <mat-error *ngIf="updateUser.controls['first_Name'].hasError('required')">
                    First Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="example-full-width">
                <mat-label>Last Name</mat-label>
                <input type="text" matInput formControlName="last_Name" [(ngModel)]="pData.last_Name">
                <mat-error *ngIf="updateUser.controls['last_Name'].hasError('required')">
                    Last Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            
            <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input type="text" matInput formControlName="email" [(ngModel)]="pData.email">
                <mat-error *ngIf="updateUser.controls['email'].hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Latitude</mat-label>
                <input type="text" matInput formControlName="location_Latitude" [(ngModel)]="pData.location_Latitude">
                <mat-error *ngIf="updateUser.controls['location_Latitude'].hasError('required')">
                    Location Latitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Location Longitude</mat-label>
                <input type="text" matInput formControlName="location_Longitude" [(ngModel)]="pData.location_Longitude">
                <mat-error *ngIf="updateUser.controls['location_Longitude'].hasError('required')">
                    Location Longitude is <strong>required</strong>
                </mat-error>
            </mat-form-field>


            <mat-form-field class="example-full-width">
                <mat-label>Phone Number</mat-label>
                <input type="text" matInput formControlName="phone_Number" [(ngModel)]="pData.phone_Number">
                <mat-error *ngIf="updateUser.controls['phone_Number'].hasError('required')">
                    Phone Number is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Profile Img Path</mat-label>
                <input type="text" matInput formControlName="image_Path1" [(ngModel)]="pData.profile_Img_Path">
                <mat-error *ngIf="updateUser.controls['profile_Img_Path'].hasError('required')">
                    Profile Img Path is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Registration Date</mat-label>
                <input type="date" matInput formControlName="registration_Date" [(ngModel)]="pData.registration_Date">
                <mat-error *ngIf="updateUser.controls['registration_Date'].hasError('required')">
                    Registration Date is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>is_Activated</mat-label>
                <input type="number" matInput formControlName="is_Activated" [(ngModel)]="pData.is_Activated">
                <mat-error *ngIf="updateUser.controls['is_Activated'].hasError('required')">
                    Is Activated is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            

            <div>
                <input type="file" #file formControlName="book_Img_Path" (change)="uploadImage(file.files)" />
            </div>

        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="UpdateUser()">Update</button>
    </mat-dialog-actions>

</ng-template>
