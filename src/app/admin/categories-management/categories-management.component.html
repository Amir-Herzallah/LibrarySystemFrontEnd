<router-outlet></router-outlet>
<app-admin-navbar></app-admin-navbar>
<div class="container-fluid page-body-wrapper">
    <app-admin-sidebar></app-admin-sidebar>
    <div class="main-panel">
        <div class="content-wrapper p-4" style="margin-top: 5rem;">
            <div class="row">
                <div class="col-12 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">All Categories</h4>
                            <button mat-button (click)="OpenCreateDialog()">Create Category</button>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> Category Name </th>
                                            <th> Library ID </th>    
                                        </tr>
                                    </thead>
                                    <tbody>
                                      
                                        <tr *ngFor="let obj of category.category_library">
                                            <td>{{ obj.category_Name }}</td>
                                           
                                            <td>{{obj.name}}</td>
                                        
                                            <td>
                                              <button mat-button (click)="OpenUpdateDialog(obj)" class="btn btn-success m-1">Update</button>
                                              <button mat-button (click)="DeleteCategory(obj.category_Id)" class="btn btn-danger m-1">Delete</button>
                                            </td>
                                          </tr>
                                       
                                    
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <app-admin-footer></app-admin-footer>
    </div>
    <!-- main-panel ends -->
</div>
<!-- page-body-wrapper ends -->
<!-- content-wrapper ends -->

<ng-template #callDeleteDailog>
    <h1 mat-dialog-title>Delete Category</h1>
    <div mat-dialog-content>Are you sure you want to delete this category?</div>
    <div mat-dialog-actions>
        <button mat-button mat-dialog-close="yes" class="btn btn-primary m-1">Yes</button>
        <button mat-button mat-dialog-close="no" class="btn btn-danger m-1">No</button>
    </div>
</ng-template>

<ng-template #callCreateDailog>
    <h2 mat-dialog-title>Create Category</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="createCategory">
            <mat-form-field class="example-full-width">
                <mat-label>Name</mat-label>
                <input type="text" matInput formControlName="category_Name">
                <mat-error *ngIf="createCategory.controls['category_Name'].hasError('required')">
                    Category Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Library Id</mat-label>
                <input type="text" matInput formControlName="library_Id">
                <mat-error *ngIf="createCategory.controls['library_Id'].hasError('required')">
                    Library Id is <strong>required</strong>
                </mat-error>
            </mat-form-field>

        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="CreateCategory()">Create</button>
    </mat-dialog-actions>

</ng-template>


<ng-template #callUpdateDailog>
    <h2 mat-dialog-title>Update Category</h2>
    <mat-dialog-content class="mat-typography">
        <form class="example-form" [formGroup]="updateCategory">
            <mat-form-field class="example-full-width">
                <mat-label>Name</mat-label>
                <input type="text" matInput formControlName="category_Name" [(ngModel)]="pData.category_Name">
                <mat-error *ngIf="updateCategory.controls['category_Name'].hasError('required')">
                    Category Name is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <mat-label>Library Id</mat-label>
                <input type="text" matInput formControlName="library_Id" [(ngModel)]="pData.library_Id">
                <mat-error *ngIf="updateCategory.controls['library_Id'].hasError('required')">
                    Library Id is <strong>required</strong>
                </mat-error>
            </mat-form-field>


        </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-button mat-dialog-close>Cancel</button>
        <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="UpdateCategory()">Update</button>
    </mat-dialog-actions>

</ng-template>
